# Overview

This spring boot application demonstrates calling a Function in cluster B to generate IDs then using the result from cluster B to add an entry to cluster A. _This approach does not work because it runs into PDX serialization problems_.

# Walk Through

1. Make sure both clusters are running, cleaning up from previous runs if needed.

   ```bash
   export GEMFIRE=/Users/rmay/Downloads/pivotal-gemfire-9.5.2
   export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home
   python init_gemfire_clusters.py
   ```

2. Run the spring boot app to load people into cluster_a using ids generated by calling a Function on cluster_b. You will need to set some environment variables to point to the two clusters.

   ```bash
   cd two-cluster-client-2a
   export GEMFIRE_LOCATOR_1_HOST=localhost
   export GEMFIRE_LOCATOR_1_PORT=10000
   export GEMFIRE_LOCATOR_2_HOST=localhost
   export GEMFIRE_LOCATOR_2_PORT=20000
   mvn spring-boot:run
   ```

3. Now connect to the first cluster and attempt to retrieve an entry.  You will see that there has been a problem with PDX serialization.

   ```bash
   gibson:two-cluster-client-2a rmay$ $GEMFIRE/bin/gfsh -e "connect --locator=localhost[10000]" -e "get --region=person --key=1 --key-class=java.lang.Integer"
   
   (1) Executing - connect --locator=localhost[10000]
   
   Connecting to Locator at [host=localhost, port=10000] ..
   Connecting to Manager at [host=192.168.1.128, port=10099] ..
   Successfully connected to: [host=192.168.1.128, port=10099]
   
   
   (2) Executing - get --region=person --key=1 --key-class=java.lang.Integer
   
   Message : Unknown pdx type=47864715
   Result  : false
   ```

